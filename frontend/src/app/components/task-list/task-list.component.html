<div class="dark">
  <button (click)="alternarTema()" class="btn-dark">Alternar Tema</button>
</div>
<div class="container">
  <h1>Minha Lista de Tarefas (Web)</h1>

  <form class="form-add" (ngSubmit)="adicionarTarefa()">
    <input
      type="text"
      placeholder="O que precisa ser feito?"
      [(ngModel)]="novaTarefa.descricao"
      name="descricao"
      required
    />
    <button type="submit">Adicionar</button>
  </form>

  <ul class="task-list">
    <li *ngFor="let tarefa of tarefas" [class.editing]="tarefa.id === tarefaEmEdicao?.id">
      <ng-container *ngIf="tarefa.id !== tarefaEmEdicao?.id">
        <input type="checkbox" [(ngModel)]="tarefa.concluida" (change)="atualizarTarefa(tarefa)" />
        <span [ngClass]="{ completed: tarefa.concluida }">{{ tarefa.descricao }}</span>
        <div class="actions">
          <button class="edit-input" (click)="iniciarEdicao(tarefa)">Editar</button>
          <button class="delete-btn" (click)="deletarTarefa(tarefa.id)">Deletar</button>
        </div>
      </ng-container>

      @if (tarefa.id === tarefaEmEdicao?.id) { @if(tarefaEmEdicao){
      <input type="checkbox" [(ngModel)]="tarefaEmEdicao.concluida" />
      <input type="text" class="edit-input" [(ngModel)]="tarefaEmEdicao.descricao" />
      }
      <div class="actions">
        <button class="btn-save" (click)="salvarEdicao()">Salvar</button>
        <button class="btn-cancel" (click)="cancelarEdicao()">Cancelar</button>
      </div>
      }
    </li>
  </ul>
</div>
<footer>
  <a href="https://github.com/Gu-Vas-Silva" class="rodape">@Gu-Vas-Silva</a>
</footer>
